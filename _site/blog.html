<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    
    <meta name="description" content="" />
    
    <title>Leeven Luo - 博客搭建</title>
    <link rel="stylesheet" href="/stylesheets/master.css" type="text/css" media="screen" charset="utf-8"/>
    <script src="/javascripts/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="/javascripts/jquery.github.js" type="text/javascript" charset="utf-8"></script>
    <link rel='alternate' type='application/rss+xml' href='http://feeds.feedburner.com/JoinTheConversation' />
  </head>
  <body>
      <div id='menu'>
        <ul>
          <li><a href='/'>Home</a></li>
          <li><a href='/blog.html'>Blog</a></li>
          <li><a href='/about.html'>About</a></li>
          <li><a href='http://github.com/leevenluo/' target='_blank' rel='me'>GitHub</a></li>
        </ul>
      </div>
      <div id='content'>
        
<div id='wrapper'>
<div class='post'>
<span class='date'>03 Apr 2013</span>
    <h1><a href='/blog/2013/04/03/buildBlog_4.html'>让大家一起来写blog吧-Hacking篇</a></h1>
    <div class='body'><h3>Hacking篇</h3>
<p>之前的搭建教程已经可以帮助你构建一个博客的雏形，不过目前的它还比较单调，因为所有的操作都是github帮你完成了，github已经为我们提供了免费的域名和空间，希望我们能自己动手DIY一个自己喜欢的博客样板，为github减轻一些负担，也为自己打造一个专属自己的博客。</p>
<p>开始之前，我们需要简单回顾一下在起始篇中谈到的本次搭建博客的整体思路，即“先在本地编写符合Jekyll规范的网站源码，然后上传到github，由github生成并托管整个网站”,现在Git配置和Github的搭建已经完成，接下来就是要学习符合jekyll规范的编码和文件组织。</p>
<h3>1、浏览jekyll规范的文件组织结构：</h3>
<pre><code>
Dir
|-- _config.yml
|-- _layouts
|	|-- default.html
|-- _posts
|	|-- 日期-Title.html
|-- index.html
</pre><p></code></p>
<p>各个文件和目录功能描述如下：</p>
<p>config.yml:</p>
<ul>
	<li>它是jekyll的配置文件，大多数只用设置baseurl选项，若缺少该文件，系统会自动生成一份默认配置，具体解释参考 <a href="https://github.com/mojombo/jekyll/wiki/Configuration">官方教程</a></li>
</ul>
<p>_layouts:</p>
<ul>
	<li>这是一个用于存放模板文件的目录，可以自定义页面的排版，Jekyll使用 <a href="https://github.com/shopify/liquid/wiki/liquid-for-designers">Liquid模板语言</a> ，可参考 <a href="https://github.com/mojombo/jekyll/wiki/Template-Data">官方文档</a></li>
</ul>
<p>_posts:</p>
<ul>
	<li>这里就是存放你博文的目录，有固定的命名方式&quot;年-月-日-文章标题.后缀名&quot;，至于后缀名则看你所使用的文档编写语言，纯网页代码则是.html后缀；若使用了轻量级标记语言，如markdown则.md后缀，textile则.textile后缀</li>
</ul>
<p>index.html:</p>
<ul>
	<li>经常和web打交道的同学应该很熟系这个文件，这里也用它表示博客的首页</li>
</ul>
<p>下面用简单的图来表示这些文件的逻辑关系：</p>
<p><img src="/images/buildBlog_7.0.jpg" alt="" /></p>
<p>PS:</p>
<ul>
	<li>为图补些文字说明，其实最想表达的核心思想就是 模板+博文+环境配置=每一页博客，而且这这个式子里，只有博文是不同，模板和环境一般都只用配置一次。当然你也可以把博客里的每一页都设置成不同的样式, 决定权完全取决于你 :)</li>
</ul>
<h3>2、动手编写一个实例</h3>
<ol>
	<li>按照之前的文件组织在本地创建一份, 假设主目录名为MainDir</li>
</ol>
<ol start="2">
	<li>编写_config.yml<br />
<pre><code>
baseurl:/MainDir
</code></pre></li>
</ol>
<ol start="3">
	<li>编写_layouts目录下的default.html文件<br />
<pre><code>
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
	&amp;lt;meta http-equiv="content-type" content="text/html; charset=utf-8" /&amp;gt;
	&amp;lt;title&amp;gt;\{\{ page.title \}\}&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
	\{\{ content \}\}
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
</code></pre></li>
</ol>
<ul>
	<li>PS:<br />
	<ul><br />
		<li>代码中的 “\{\{ \}\}” 是 <a href="https://github.com/shopify/liquid/wiki/liquid-for-designers">Liquid模板语言</a> , <strong>转义符号&quot;\&quot;是没有的，在这里添加上去只是防止解析到本博客本身，下同</strong></li>
		<li>\{\{ page.title \}\}表示文章标题，\{\{ content \}\}表示文章内容</li>
<p></ul></li></p>
</ul>
<ol start="4">
	<li>编写_posts目录下的2013-04-03-buildBlog.html文件<br />
<pre><code>
---
layout: default
title: buildBlog
---
&amp;lt;h2&amp;gt;\{\{ page.title \}\}&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Let's go to build own blog&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;\{\{ page.date \| date_to_string \}\}&amp;lt;/p&amp;gt;
</code></pre></li>
</ol>
<ul>
	<li>PS:<br />
	<ul><br />
		<li>在 <code>---</code> 之间的内容是yaml文件头，用于设置特定标识的元数据，比如 “layout” 参数设置使用_layouts目录下的同名模板作为博客的模板, 其他的设置项可以在 <a href="https://github.com/mojombo/jekyll/wiki/YAML-Front-Matter">这里</a> 查找</li>
<p></ul></li></p>
</ul>
<ol start="5">
	<li>编写index.html文件<br />
<pre><code>
---
layout: default
title: 大家一起来写博客吧
---
&amp;lt;h2&amp;gt;\{\{ page.title \}\}&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;大家一起来写博客吧&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
	\{\% for post in site.posts \%\}
	&amp;lt;li&amp;gt;\{\{ post.date | date_to_string \}\} &amp;lt;a href="\{\{ site.baseurl \}\}\{\{ post.url \}\}"&amp;gt;\{\{ post.title \}\}&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
	\{\% endfor \%\}
&amp;lt;/ul&amp;gt;
</code></pre></li>
</ol>
<ol start="6">
	<li>编写完成，接下来需要进行测试，一种方法就是将代码push到github服务，然后用域名 “username.github.com” 访问，不过每次都这样为了测试频繁push似乎太麻烦了，能不能在本地进行jekyll测试呢？答案是肯定的，搞起：<br />
<pre><code>
linux 环境(推荐)：
系统一般都预装了Ruby，Jekyll是Ruby开发的，可以直接安装, 
$gem install Jekyll
$jekyll --version
Jekyll 0.12.1
</code></pre><br />
windons 环境请参考 <a href="http://www.cnblogs.com/purediy/archive/2013/03/07/2948892.html">这里</a></li>
</ol>
<ol start="7">
	<li>本地jekyll测试环境搭建好后，测试开始：<br />
<pre><code>
$cd MainDir
$jekyll --server
WARNING: Could not read configuration. Using defaults (and options).
	Invalid configuration - /home/lxinji/MainDir/_config.yml
Building site: /home/lxinji/MainDir -&amp;gt; /home/lxinji/MainDir/_site
Successfully generated site: /home/lxinji/MainDir -&amp;gt; /home/lxinji/MainDir/_site
[2013-04-04 03:03:37] INFO  WEBrick 1.3.1
[2013-04-04 03:03:37] INFO  ruby 1.8.7 (2011-06-30) [i686-linux]
[2013-04-04 03:03:42] WARN  TCPServer Error: Address already in use - bind(2)
[2013-04-04 03:03:42] INFO  WEBrick::HTTPServer#start: pid=13554 port=4000
</code></pre></li>
</ol>
<ul>
	<li>PS:<br />
	<ul><br />
		<li>若看到上面的打印则表示jekyll已经帮你生成好了页面，服务绑定在localhost:4000，现在可以在浏览器中键入 http://localhost:4000/ 开始测试DIY的博客啦</li>
<p></ul></li></p>
</ul>
<ol start="8">
	<li>若以上的过程都顺利完成了，那么接下来的最后一步就是将你的博客发布出去:<br />
<pre><code>
$git clone http://github.com/username/username.github.com
$cd username.github.com
$rm -rf "除了.git外的所有文件"
$cp -r ../MainDir ./
$jekyll --server #再验证一次
$git add .
$git commit -am "first update"
$git push
</code></pre></li>
	<li>PS:<br />
	<ul><br />
		<li>过几分钟你就可以用username.github.com访问你上传的博客了,恭喜 :)</li>
<p></ul></li></p>
</ol>
<h3>一些扩展</h3>
<ul>
	<li><a href="http://www.kuqin.com/managetool/20110705/92113.html">10篇写给Git初学者的教程</a></li>
	<li><a href="http://www.yangzhiping.com/tech/writing-space.html">理想的写作环境：git+github+markdown+jekyll</a></li>
</ul>
<p>最后也恭喜下自己，因为4月2日博客的访问量突破50PV，激动之余决定赶夜把最后一篇写完，在这里感谢关注我博客的同学，希望给我多提意见和建议，谢谢:)</p></div>
<div class='sns'>
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_6"></a>
<a class="addthis_button_preferred_7"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4df3c7a42c2a2e7e"></script>
<!-- AddThis Button END -->
</div>    <br>
<a href='/blog/2013/04/03/buildBlog_4.html#disqus_thread'>View Comments</a>
</div>
</div>


<div id='wrapper'>
<div class='post'>
<span class='date'>30 Mar 2013</span>
    <h1><a href='/blog/2013/03/30/buildBlog_3.html'>让大家一起来写blog吧-搭建篇</a></h1>
    <div class='body'><h3>搭建篇</h3>
<h3>GitHub Pages 搭建</h3>
<p>紧接着第二章配置篇，在第二章已经完成了本地Git环境配置，那么接下来就可以搭建Github Pages。其实只需要两步，就可以完成个人主页的搭建：</p>
<h3>PS：若想创建形如“username.github.com”域名主页，每个用户名只能创建一个</h3>
<h3>1、用你创建的GitHub帐号 <a href="http://github.com">登录 Github</a>, 接下来点击右上角“create a new repo”创建新的代码仓库</h3>
<p>PS:</p>
<ul>
	<li>创建仓库名(Repository Name)格式：username.github.com, 比如：leevenluo.github.com；之后点击“Create Repository”完成创建</li>
</ul>
<h3>2、点击代码代码仓库右边的&quot;setting”:(若找不到，可点击刚创建的代码仓库名回到仓库主页面)</h3>
<p><img src="/images/buildBlog_5.0.jpg" alt="" /></p>
<p>在下面找到“Github Pages”&#8212;&gt;&quot;Automatic Page Generator&quot;, 到页面最下面点击“Continue To Layouts”, 然后就可以看到Github为你自动生成的主页，这时你可以在上面列出的几种主题里选择你喜欢的，然后点击“Publish”：</p>
<p><img src="/images/buildBlog_6.0.jpg" alt="" /></p>
<p>恭喜你，这时你已经创建好了个人主页，主页域名是：username.github.com, 不过你需要短暂的等待几分钟才可以正常访问，因为github需要时间为你生效你的配置。</p>
<p>细心的读者应该已经发现你创建的代码仓库里已经有了代码，没错，那个就是Github为你生成个人主页的模板,在下一篇里我会和你一起来了解该如何编写和提交个人主页代码。</p>
<p>一些扩展：<br />
<a href="https://help.github.com/categories/20/articles">Github Pages官方教程</a></p></div>
<div class='sns'>
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_6"></a>
<a class="addthis_button_preferred_7"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4df3c7a42c2a2e7e"></script>
<!-- AddThis Button END -->
</div>    <br>
<a href='/blog/2013/03/30/buildBlog_3.html#disqus_thread'>View Comments</a>
</div>
</div>


<div id='wrapper'>
<div class='post'>
<span class='date'>28 Mar 2013</span>
    <h1><a href='/blog/2013/03/28/buildBlog_2.html'>让大家一起来写blog吧-配置篇</a></h1>
    <div class='body'><h3>配置篇</h3>
<h3>一、配置和使用Github</h3>
<p>要使用Git，需要安装它的客户端，推荐在Linux下使用Git，会比较方便。Windows版的下载地址在 <a href="http://code.google.com/p/msysgit/downloads/list">这里</a> 。其他系统的安装也可以参考 <a href="https://help.github.com/articles/set-up-git">官方的安装教程</a> 。<br />
下载安装客户端之后，各个系统的配置就类似了，我们使用windows作为例子，Linux和Mac与此类似。<br />
为了更好的完成下面的步骤，建议先到 <a href="http://github.com">Github站点</a> 申请自己的帐号，因为后面的步骤中需要用到。<br />
在Windows下，打开Git Bash，其他系统下面则打开终端（Terminal）</p>
<h3>注意：下面的步骤是设置给Github提交代码的权限</h3>
<h3>1、检查SSH keys的设置</h3>
<p>首先我们需要检查你电脑上现有的ssh key：<br />
<pre><code>
$ cd ~/.ssh
</code></pre><br />
如果显示“No such file or directory”，跳到第三步，否则继续。</p>
<h3>2、备份和移除原来的ssh key设置：</h3>
<p>因为已经存在key文件，所以需要备份旧的数据并删除：<br />
<pre><code>
$ ls 
id_rsa  id_rsa.pub  known_hosts
$ mkdir key_backup
$ mv id_rsa* key_backup
</code></pre></p>
<h3>3、生成新的SSH Key：</h3>
<p>输入下面的代码，就可以生成新的key文件，我们只需要默认设置就好，所以当需要输入文件名的时候，回车就好。<br />
<pre><code>
$ ssh-keygen -t rsa -C "邮件地址@youremail.com"
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):&amp;lt;回车就好&amp;gt;
</code></pre></p>
<p>然后系统会要你输入加密串（Passphrase）：</p>
<pre><code>
Enter passphrase (empty for no passphrase):&amp;lt;输入加密串&amp;gt;
Enter same passphrase again:&amp;lt;再次输入加密串&amp;gt;
</code></pre>
<p>最后看到这样的界面，就成功设置ssh key了：<br />
<pre><code>
Your identification has been saved in /home/lxinji/.ssh/id_rsa.
Your public key has been saved in /home/lxinji/.ssh/id_rsa.pub.
The key fingerprint is:
6a:a4:c9:98:85:48:c4:c9:38:9e:90:fa:23:b8:ca:54 loxinji@gmail.com
The key's randomart image is:
+--[ RSA 2048]----+
|+o.              |
|*+               |
|+o.              |
|o+ .             |
|o..E. . S        |
|o += + .         |
| +o.+ o          |
|+    .           |
|o.               |
+-----------------+
</code></pre></p>
<h3>4、添加SSH Key到GitHub：</h3>
<p>在本机设置SSH Key之后，需要添加到GitHub上，以完成SSH链接的设置。<br />
用文本编辑工具打开id_rsa.pub文件，如果看不到这个文件，你需要设置显示隐藏文件。准确的复制这个文件的内容，才能保证设置的成功。<br />
在GitHub的主页上右上角点击设置按钮：</p>
<p><img src="/images/buildBlog_4.0.jpg" alt="" /></p>
<p>在左侧选择SSH Keys项，点击“Add <span class="caps"><span class="caps">SSH</span></span> key”, 把复制的内容粘贴进去，然后点击Add Key按钮即可，注意：若添加不成功，请重新复制本地SSH Keys</p>
<h3>5、测试一下</h3>
<p>可以输入下面的命令，看看设置是否成功，git@github.com的部分不要修改：<br />
<pre><code>
$ ssh -T git@github.com
</code></pre></p>
<p>如果是下面的反应(本人配置没有出现过，若出现可以参考以下方法)：<br />
<pre><code>
The authenticity of host 'github.com (207.97.227.239)' can't be established.
RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
Are you sure you want to continue connecting (yes/no)?
</code></pre></p>
<p>不要紧张，输入yes就好，然后会看到：<br />
<pre><code>
Hi &amp;lt;em&amp;gt;username&amp;lt;/em&amp;gt;! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre></p>
<p>到这里，已经生成了SSH Key，这里的主要作用是在本地Git和Github进行连接时必须要进行身份确认，SSH key就是认证凭证。</p>
<h3>6、设置你的账号信息</h3>
<pre><code>
$ git config --global user.name "你的名字"
$ git config --global user.email "your_email@youremail.com"
</code></pre>
<p>现在你可以成功连接GitHub了,测试连接放在下一篇里，因为现在你的远程仓库中还没有代码可以pull到本地。</p></div>
<div class='sns'>
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_6"></a>
<a class="addthis_button_preferred_7"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4df3c7a42c2a2e7e"></script>
<!-- AddThis Button END -->
</div>    <br>
<a href='/blog/2013/03/28/buildBlog_2.html#disqus_thread'>View Comments</a>
</div>
</div>


<div id='wrapper'>
<div class='post'>
<span class='date'>28 Mar 2013</span>
    <h1><a href='/blog/2013/03/28/buildBlog_1.html'>让大家一起来写blog吧-起始篇</a></h1>
    <div class='body'><h3>起始篇</h3>
<p>我这里所讲的博客搭建环境是:<b>github pages + jekyll</b></p>
<p>在这里，先感谢以下文章的作者，是你们的博文让我可以成功搭建博客，在我的文章中或多或少的引用了你们文章中的片段，只为更多的朋友能早日建立属于他们自己的博客！<br />
<a href="http://beiyuu.com/github-pages/">beiyuu博客</a><br />
<a href="http://yanping.me/cn/blog/2012/03/18/github-pages-step-by-step/">yanping博客</a></p>
<h3>一、什么是gitbub pages？</h3>
<p>首先需要介绍下Github，GitHub 是一个用于使用Git版本控制系统项目的共享虚拟主机服务。它由GitHub公司（曾称Logical Awesome）的开发者Chris Wanstrath、PJ Hyett和Tom Preston-Werner使用Ruby on Rails编写而成。总的来说，github 是一个免费的代码管理仓库，负责开发项目的代码托管，关于github的相关信息可以 <a href="http://zh.wikipedia.org/wiki/GitHub">点击这里</a> 。</p>
<p>github给你提供了项目的存储空间，在你的项目主页上可以浏览源码树:<br />
<img width="552" height="230" src="/images/buildBlog_1.0.png"/></p>
<p>不过这样的项目主页似乎不怎么友好，不能提供简易的操作和展示项目的模型和效果，所以github需要提供一个友好且易于展示项目的平台，github pages就这样诞生了。github Pages可以被认为是用户编写的、托管在github上的静态网页。</p>
<p>github提供模板，允许站内生成网页，但也允许用户自己编写网页，然后上传。有意思的是，这种上传并不是单纯的上传，而是会经过Jekyll程序的再处理。</p>
<h3>二、Jekyll是什么？</h3>
<p>Jekyll（发音/&#8217;dʒiːk əl/，&quot;杰克尔&quot;）是一个静态站点生成器，它会根据网页源码生成静态文件。它提供了模板、变量、插件等功能，所以实际上可以用来编写整个网站。整个思路到这里就很明显了。你先在本地编写符合Jekyll规范的网站源码，然后上传到github，由github生成并托管整个网站。</p>
<p>这种做法的好处是：</p>
<ul>
	<li>免费，无限流量。</li>
	<li>享受git的版本管理功能，不用担心文章遗失。</li>
	<li>你只要用自己喜欢的编辑器写文章就可以了，其他事情一概不用操心，都由github处理。</li>
</ul>
<p>它的缺点是：</p>
<ul>
	<li>有一定技术门槛，你必须要懂一点git和网页开发。</li>
	<li>它生成的是静态网页，添加动态功能必须使用外部服务，比如评论功能就只能用disqus。</li>
	<li>它不适合大型网站，因为没有用到数据库，每运行一次都必须遍历全部的文本文件，网站越大，生成时间越长。</li>
</ul>
<p>但是，综合来看，它不失为搭建中小型Blog或项目主页的最佳选项之一。</p></div>
<div class='sns'>
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_6"></a>
<a class="addthis_button_preferred_7"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4df3c7a42c2a2e7e"></script>
<!-- AddThis Button END -->
</div>    <br>
<a href='/blog/2013/03/28/buildBlog_1.html#disqus_thread'>View Comments</a>
</div>
</div>

        <div class='clearfix'></div>
    </div>
    <div id='footer'>
      Copyright &copy; 2013 Leeven Luo. Theme and code by <a href="http://github.com/mbleigh">Michael Bleigh</a>. Hosted by <a href='http://github.com/dyang/dyang.github.com/' target='_blank'>GitHub</a> and powered by <a href='http://github.com/mojombo/jekyll'>Jekyll</a>.
    </div>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-6237019-3");
        pageTracker._trackPageview();
		} catch(err) {}</script>
  </body>
</html>
