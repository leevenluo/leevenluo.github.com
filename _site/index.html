<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">

    
        <meta name="description" content="Leeven Luo的个人博客" />
    

    <title>Leeven Luo - Hacking Newer</title>
    <link rel="stylesheet" href="/stylesheets/master.css" type="text/css" media="screen" charset="utf-8"/>

    <!--language highlight-->
    <link rel="stylesheet" href="/stylesheets/highlight.css" type="text/css" media="all" charset="utf-8"/>
    <link rel='alternate' type='application/rss+xml' href='http://feeds.feedburner.com/JoinTheConversation' />

    <script src="/javascripts/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="/javascripts/jquery.github.js" type="text/javascript" charset="utf-8"></script>

  </head>

  <body>
  <div id='menu'>
      <ul>
          <li><a href='/'>Home</a></li>
          <li><a href='/blog.html'>Blog</a></li>
          <li><a href='/about.html'>About</a></li>
          <li><a href='http://github.com/leevenluo/' target='_blank' rel='me'>GitHub</a></li>
      </ul>
  </div>

  <div id='content'>
      <div class='home_box' id='home_left'>
	
	<div id='wrapper'>
		<div class='post'>
			<h1><a href='/blog/2013/04/03/buildBlog_4.html'>让大家一起来写blog吧-Hacking篇</a>
				<div class='date'> - 03 Apr 2013</div></h1>
			<div class='body'><h3>Hacking篇</h3>
<p>之前的搭建教程已经可以帮助你构建一个博客的雏形，不过目前的它还比较单调，因为所有的操作都是github帮你完成了，github已经为我们提供了免费的域名和空间，希望我们能自己动手DIY一个自己喜欢的博客样板，为github减轻一些负担，也为自己打造一个专属自己的博客。</p>
<p>开始之前，我们需要简单回顾一下在起始篇中谈到的本次搭建博客的整体思路，即“先在本地编写符合Jekyll规范的网站源码，然后上传到github，由github生成并托管整个网站”,现在Git配置和Github的搭建已经完成，接下来就是要学习符合jekyll规范的编码和文件组织。</p>
<h3>1、浏览jekyll规范的文件组织结构：</h3>
<div class="highlight"><pre><code class="html">Dir
|-- _config.yml
|-- _layouts
|	|-- default.html
|-- _posts
|	|-- 日期-Title.html
|-- index.html
</code></pre></div><p>各个文件和目录功能描述如下：</p>
<p>config.yml:</p>
<ul>
	<li>它是jekyll的配置文件，大多数只用设置baseurl选项，若缺少该文件，系统会自动生成一份默认配置，具体解释参考 <a href="https://github.com/mojombo/jekyll/wiki/Configuration">官方教程</a></li>
</ul>
<p>_layouts:</p>
<ul>
	<li>这是一个用于存放模板文件的目录，可以自定义页面的排版，Jekyll使用 <a href="https://github.com/shopify/liquid/wiki/liquid-for-designers">Liquid模板语言</a> ，可参考 <a href="https://github.com/mojombo/jekyll/wiki/Template-Data">官方文档</a></li>
</ul>
<p>_posts:</p>
<ul>
	<li>这里就是存放你博文的目录，有固定的命名方式&quot;年-月-日-文章标题.后缀名&quot;，至于后缀名则看你所使用的文档编写语言，纯网页代码则是.html后缀；若使用了轻量级标记语言，如markdown则.md后缀，textile则.textile后缀</li>
</ul>
<p>index.html:</p>
<ul>
	<li>经常和web打交道的同学应该很熟系这个文件，这里也用它表示博客的首页</li>
</ul>
<p>下面用简单的图来表示这些文件的逻辑关系：</p>
<p><img src="/images/buildBlog_7.0.jpg" alt="" /></p>
<p>PS:</p>
<ul>
	<li>为图补些文字说明，其实最想表达的核心思想就是 模板+博文+环境配置=每一页博客，而且这这个式子里，只有博文是不同，模板和环境一般都只用配置一次。当然你也可以把博客里的每一页都设置成不同的样式, 决定权完全取决于你 :)</li>
</ul>
<h3>2、动手编写一个实例</h3>
<ol>
	<li>按照之前的文件组织在本地创建一份, 假设主目录名为MainDir</li>
</ol>
<ol start="2">
	<li>编写_config.yml</li>
</ol>
<div class="highlight"><pre><code class="html">baseurl:/MainDir
</code></pre></div><ol start="3">
	<li>编写_layouts目录下的default.html文件</li>
</ol>
<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;title&gt;</span>{{ page.title }}<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    {{ content }}
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><ul>
	<li>PS:
	<ul>
		<li>{{ page.title }}表示文章标题，{{ content }}表示文章内容</li>
	</ul></li>
</ul>
<ol start="4">
	<li>编写_posts目录下的2013-04-03-buildBlog.html文件</li>
</ol>
<div class="highlight"><pre><code class="html">---
layout: default
title: buildBlog
---
<span class="nt">&lt;h2&gt;</span>{{ page.title }}<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>Let&#39;s go to build own blog<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>{{ page.date | date_to_string }}<span class="nt">&lt;/p&gt;</span>
</code></pre></div><ul>
	<li>PS:
	<ul>
		<li>在 <code>---</code> 之间的内容是yaml文件头，用于设置特定标识的元数据，比如 “layout” 参数设置使用_layouts目录下的同名模板作为博客的模板, 其他的设置项可以在 <a href="https://github.com/mojombo/jekyll/wiki/YAML-Front-Matter">这里</a> 查找</li>
	</ul></li>
</ul>
<ol start="5">
	<li>编写index.html文件</li>
</ol>
<div class="highlight"><pre><code class="html"><span class="nt">&lt;pre&gt;&lt;code&gt;</span>
---
layout: default
title: 大家一起来写博客吧
---
<span class="nt">&lt;h2&gt;</span>{{ page.title }}<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>大家一起来写博客吧<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;ul&gt;</span>
	{% for post in site.posts %}
	<span class="nt">&lt;li&gt;</span>{{ post.date | date_to_string }}<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ site.baseurl }} {{ post.url }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
	{% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div><ol start="6">
	<li>编写完成，接下来需要进行测试，一种方法就是将代码push到github服务，然后用域名 “username.github.com” 访问，不过每次都这样为了测试频繁push似乎太麻烦了，能不能在本地进行jekyll测试呢？答案是肯定的，搞起：</li>
</ol>
<div class="highlight"><pre><code class="bash">linux 环境<span class="o">(</span>推荐<span class="o">)</span>：
系统一般都预装了Ruby，Jekyll是Ruby开发的，可以直接安装, 
<span class="nv">$ </span>gem install Jekyll
<span class="nv">$ </span>jekyll --version
Jekyll 0.12.1
</code></pre></div><p>windons 环境请参考 <a href="http://www.cnblogs.com/purediy/archive/2013/03/07/2948892.html">这里</a></p>
<ol start="7">
	<li>本地jekyll测试环境搭建好后，测试开始：</li>
</ol>
<div class="highlight"><pre><code class="bash"><span class="nv">$ </span><span class="nb">cd </span>MainDir
<span class="nv">$ </span>jekyll --server
WARNING: Could not <span class="nb">read </span>configuration. Using defaults <span class="o">(</span>and options<span class="o">)</span>.
	Invalid configuration - /home/lxinji/MainDir/_config.yml
Building site: /home/lxinji/MainDir -&gt; /home/lxinji/MainDir/_site
Successfully generated site: /home/lxinji/MainDir -&gt; /home/lxinji/MainDir/_site
<span class="o">[</span>2013-04-04 03:03:37<span class="o">]</span> INFO  WEBrick 1.3.1
<span class="o">[</span>2013-04-04 03:03:37<span class="o">]</span> INFO  ruby 1.8.7 <span class="o">(</span>2011-06-30<span class="o">)</span> <span class="o">[</span>i686-linux<span class="o">]</span>
<span class="o">[</span>2013-04-04 03:03:42<span class="o">]</span> WARN  TCPServer Error: Address already in use - <span class="nb">bind</span><span class="o">(</span>2<span class="o">)</span>
<span class="o">[</span>2013-04-04 03:03:42<span class="o">]</span> INFO  WEBrick::HTTPServer#start: <span class="nv">pid</span><span class="o">=</span>13554 <span class="nv">port</span><span class="o">=</span>4000
</code></pre></div><ul>
	<li>PS:
	<ul>
		<li>若看到上面的打印则表示jekyll已经帮你生成好了页面，服务绑定在localhost:4000，现在可以在浏览器中键入 http://localhost:4000/ 开始测试DIY的博客啦</li>
	</ul></li>
</ul>
<ol start="8">
	<li>若以上的过程都顺利完成了，那么接下来的最后一步就是将你的博客发布出去:</li>
</ol>
<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>git clone http://github.com/username/username.github.com
<span class="nv">$ </span><span class="nb">cd </span>username.github.com
<span class="nv">$ </span>rm -rf <span class="s2">&quot;除了.git外的所有文件&quot;</span>
<span class="nv">$ </span>cp -r ../MainDir ./
<span class="nv">$ </span>jekyll --server <span class="c">#再验证一次</span>
<span class="nv">$ </span>git add .
<span class="nv">$ </span>git commit -am <span class="s2">&quot;first update&quot;</span>
<span class="nv">$ </span>git push
</code></pre></div><ul>
	<li>PS:
	<ul>
		<li>过几分钟你就可以用username.github.com访问你上传的博客了,恭喜 :)</li>
	</ul></li>
</ul>
<h3>一些扩展</h3>
<ul>
	<li><a href="http://www.kuqin.com/managetool/20110705/92113.html">10篇写给Git初学者的教程</a></li>
	<li><a href="http://www.yangzhiping.com/tech/writing-space.html">理想的写作环境：git+github+markdown+jekyll</a></li>
</ul>
<p>最后也恭喜下自己，因为4月2日博客的访问量突破50PV，激动之余决定赶夜把最后一篇写完，在这里感谢关注我博客的同学，希望给我多提意见和建议，谢谢:)</p></div>
			<div class='sns'>
				<!-- AddThis Button BEGIN -->
				<div class="addthis_toolbox addthis_default_style ">
					<a class="addthis_button_preferred_1"></a>
					<a class="addthis_button_preferred_2"></a>
					<a class="addthis_button_preferred_3"></a>
					<a class="addthis_button_preferred_6"></a>
					<a class="addthis_button_preferred_7"></a>
					<a class="addthis_button_compact"></a>
				</div>
				<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
				<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4df3c7a42c2a2e7e"></script>
				<!-- AddThis Button END -->  
			</div>
			<br>
			<a href='/blog/2013/04/03/buildBlog_4.html#disqus_thread'>View Comments</a>
		</div>
	</div>
	
</div>

<h2><span class="more"><a href='/blog.html'>More</a></span></h2>
</div>
<div class='home_box' id='home_right'>
	<h2>Categories</h2>
	<div id='github-projects'>
		<div class="repo">
			<h3><a href="/life.html">生活感悟(1)</a></h3>
			<h3><a href="/blog.html">博客讨论(4)</a></h3>
		</div>
	</div>
	<p>
	<h2>Popular Posts</h2>
	<div id='github-projects'>
		<div class="repo">
			<h3><a href="/life/2013/03/24/love.html">爱</a></h3>
			<h3><a href="/blog/2013/03/28/buildBlog_1.html">让我们一起写博客吧-起始篇</a></h3>
			<h3><a href="/blog/2013/03/28/buildBlog_2.html">让我们一起写博客吧-配置篇</a></h3>
			<h3><a href="/blog/2013/03/30/buildBlog_3.html">让我们一起写博客吧-搭建篇</a></h3>
			<h3><a href="/blog/2013/04/03/buildBlog_4.html">让我们一起写博客吧-Hacking篇</a></h3>
		</div>
	</div>
</div>

<!--
<script type="text/javascript" charset="utf-8">
	$.githubUser('dyang', function(data) {
			$('#github-projects').html('');

			var repos = data.user.repositories;
			repos.sort(function(a,b) {
				return b.watchers - a.watchers;
				});

			$(repos.slice(0,6)).each(function() {
				$('#github-projects').append("\
					<div class='repo'>\
					<h3><a href='" + this.url + "'>" + this.name + "</a></h3>\
					<span class='desc'>"+this.description+"</span>\
					</div>");
				});
			});
		</script>
		-->

      <div class='clearfix'></div>
  </div>

  <div id='footer'>
      Copyright &copy; 2013 Leeven Luo. Theme and code by <a href="http://github.com/mbleigh">Michael Bleigh</a>. Hosted by <a href='http://github.com/dyang/dyang.github.com/' target='_blank'>GitHub</a> and powered by <a href='http://github.com/mojombo/jekyll'>Jekyll</a>.
  </div>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-50648311-1', 'leevenluo.info');
      ga('send', 'pageview');
  </script>

  </body>
</html>
